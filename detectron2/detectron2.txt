conda create -n env_name python=3.8

conda install pytorch==1.10.0 torchvision==0.11.0 torchaudio==0.10.0 cudatoolkit=10.2 -c pytorch

git clone https://github.com/facebookresearch/detectron2.git

pip install fvcore
pip install opencv-python

pip install detectron2==0.6 -f https://dl.fbaipublicfiles.com/detectron2/wheels/cu102/torch1.10/index.html

To solve: AttributeError: module 'distutils' has no attribute 'version'
pip install setuptools==59.5.0

I increase the pytorch from 11.0 to 11.8 in order to use cuda.